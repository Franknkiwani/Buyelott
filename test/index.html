<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Goal Tracker with Firebase</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;}
  body{background:#0b0b0d;color:#fff;min-height:100vh;padding:20px;}
  header{height:56px;display:flex;align-items:center;padding:0 16px;background:rgba(15,15,18,0.9);border-bottom:1px solid rgba(255,255,255,0.04);}
  header .brand{font-size:28px;font-weight:700;}
  .goal-box{margin-top:20px;max-width:600px;width:100%;text-align:center;}
  .progress-bar{background:rgba(255,255,255,0.1);border-radius:10px;overflow:hidden;height:20px;}
  .progress-fill{width:0;height:100%;background:#4caf50;border-radius:10px;transition:0.4s;}
  input{width:100%;padding:8px;margin:10px 0;border:none;border-radius:8px;background:rgba(255,255,255,0.1);color:#fff;font-size:16px;text-align:center;}
  .fx-info{margin-top:10px;opacity:0.85;font-size:14px;}
</style>
</head>
<body>

<header><div class="brand">frank nkiwani</div></header>

<div class="goal-box">
  <h2>Goal: $500,000 by Jan 1, 2030</h2>
  <input type="number" id="currentAmount" placeholder="Enter how much you have ($)" />
  <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
  <div class="fx-info" id="countdown">Time left: calculatingâ€¦</div>
</div>

<!-- Firebase SDK -->
<script type="module">
  // Import Firebase modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
  import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDFHskUWiyHhZke3KT9kkOtFI_gPsKfiGo",
    authDomain: "itzhoyoo-f9f7e.firebaseapp.com",
    databaseURL: "https://itzhoyoo-f9f7e-default-rtdb.firebaseio.com",
    projectId: "itzhoyoo-f9f7e",
    storageBucket: "itzhoyoo-f9f7e.filestorage.app",
    messagingSenderId: "1094792075584",
    appId: "1:1094792075584:web:d49e9c3f899d3cd31082a5",
    measurementId: "G-LLT6F9WRKH"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const amountInput = document.getElementById('currentAmount');
  const progressFill = document.getElementById('progressFill');
  const goal = 500000;

  // Load saved amount on page load
  const amountRef = ref(db, 'personalGoal/currentAmount');
  get(amountRef).then(snapshot => {
    if(snapshot.exists()){
      amountInput.value = snapshot.val();
      updateProgress();
    }
  });

  // Update Firebase and progress bar when input changes
  amountInput.addEventListener('input', () => {
    const value = parseFloat(amountInput.value) || 0;
    set(amountRef, value);
    updateProgress();
  });

  function updateProgress(){
    const val = parseFloat(amountInput.value) || 0;
    let percent = Math.min((val/goal)*100,100);
    progressFill.style.width = percent + '%';
  }

  // Countdown to Jan 1, 2030
  const countdownEl = document.getElementById('countdown');
  function updateCountdown() {
    const target = new Date('2030-01-01T00:00:00');
    const now = new Date();
    const diff = target - now;
    if(diff <= 0){
      countdownEl.textContent = "ðŸŽ‰ Itâ€™s 2030!";
      return;
    }
    const days = Math.floor(diff / (1000*60*60*24));
    const hrs = Math.floor((diff / (1000*60*60)) % 24);
    const mins = Math.floor((diff / (1000*60)) % 60);
    const secs = Math.floor((diff / 1000) % 60);
    countdownEl.textContent = `Time left: ${days}d ${hrs}h ${mins}m ${secs}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>

</body>
</html>