<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Goal + FX Tracker</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;}
  body{background:#0b0b0d;color:#fff;min-height:100vh;padding:20px;}
  header{height:56px;display:flex;align-items:center;padding:0 16px;background:rgba(15,15,18,0.9);border-bottom:1px solid rgba(255,255,255,0.04);}
  header .brand{font-size:28px;font-weight:700;}
  .goal-box{margin-top:20px;max-width:600px;width:100%;text-align:center;}
  .progress-bar{background:rgba(255,255,255,0.1);border-radius:10px;overflow:hidden;height:20px;}
  .progress-fill{width:0;height:100%;background:#4caf50;border-radius:10px;transition:0.4s;}
  input{width:100%;padding:8px;margin:10px 0;border:none;border-radius:8px;background:rgba(255,255,255,0.1);color:#fff;font-size:16px;text-align:center;}
  .fx-info{margin-top:10px;opacity:0.85;font-size:14px;}
</style>
</head>
<body>

<header><div class="brand">frank nkiwani</div></header>

<div class="goal-box">
  <h2>Goal: $500,000 by Jan 1, 2030</h2>

  <input type="number" id="currentAmount" placeholder="Enter how much you have ($)" />

  <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>

  <div class="fx-info" id="fxRate">Loading USD â†’ ZAR rate...</div>
  <div class="fx-info" id="convertedZAR"></div>

  <div class="fx-info" id="countdown">Time left: calculatingâ€¦</div>
</div>

<script>
  const goal = 500000;
  const progressFill = document.getElementById('progressFill');
  const currentAmountEl = document.getElementById('currentAmount');
  const fxRateEl = document.getElementById('fxRate');
  const convertedZAREl = document.getElementById('convertedZAR');
  const countdownEl = document.getElementById('countdown');
  let currentRate = null;

  currentAmountEl.addEventListener('input', updateProgress);

  async function fetchLiveRate() {
    try {
      const res = await fetch('https://api.exchangerate.host/latest?base=USD&symbols=ZAR');
      const data = await res.json();
      currentRate = data.rates.ZAR;
      fxRateEl.textContent = `USD â†’ ZAR: 1 USD â‰ˆ R ${currentRate.toFixed(2)}`;
      updateProgress();
    } catch (err) {
      fxRateEl.textContent = "Failed to load FX rate.";
      console.error(err);
    }
  }

  function updateProgress() {
    const val = parseFloat(currentAmountEl.value) || 0;
    let percent = Math.min((val / goal) * 100, 100);
    progressFill.style.width = percent + '%';
    if (currentRate !== null) {
      convertedZAREl.textContent = `â‰ˆ R ${(val * currentRate).toLocaleString('en-ZA', {maximumFractionDigits:2})}`;
    }
  }

  function updateCountdown() {
    const target = new Date('2030-01-01T00:00:00');
    const now = new Date();
    const diff = target - now;
    if (diff <= 0) {
      countdownEl.textContent = "ðŸŽ‰ Itâ€™s 2030!";
      return;
    }
    const days = Math.floor(diff / (1000*60*60*24));
    const hrs = Math.floor((diff / (1000*60*60)) % 24);
    const mins = Math.floor((diff / (1000*60)) % 60);
    const secs = Math.floor((diff / 1000) % 60);
    countdownEl.textContent = `Time left: ${days}d ${hrs}h ${mins}m ${secs}s`;
  }

  fetchLiveRate();
  setInterval(fetchLiveRate, 60*1000); // refresh every minute
  setInterval(updateCountdown, 1000);
</script>

</body>
</html>