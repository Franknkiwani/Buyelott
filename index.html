<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Soccer Login & Signup</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; }
body {
  margin: 0; 
  height: 100vh;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #ff4e50, #f9d423, #1fa2ff, #12d8fa, #a6ffcb);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;

  -webkit-user-select: none; /* Safari */
  -moz-user-select: none;    /* Firefox */
  -ms-user-select: none;     /* IE10+/Edge */
  user-select: none;         /* Standard */
}
@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(8px);
  z-index: 0;
}
.page {
  position: fixed; inset: 0;
  display: none; flex-direction: column; justify-content: center; align-items: center;
  padding: 40px 20px; z-index: 1;
  opacity: 0; transform: translateY(20px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.page.active { opacity: 1; transform: translateY(0); }
h2 { color: black; margin-bottom: 20px; }
input, select {
  width: 100%; padding: 12px; margin: 8px 0 16px;
  border: 2px solid black; border-radius: 8px;
  background: rgba(255,255,255,0.9); color: black; font-size: 16px;
}
input::placeholder { color: #444; }
button {
  width: 100%; padding: 12px;
  border: 2px solid black; border-radius: 8px;
  background: linear-gradient(90deg, #ffde59, #ffa31a);
  color: black; font-weight: bold; font-size: 16px;
  cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
}
button:hover { background: linear-gradient(90deg, #ffd000, #ff8c00); }
.toggle { text-align: center; margin-top: 12px; }
.toggle a { color: black; cursor: pointer; text-decoration: underline; }
.logo { text-align: center; margin-bottom: 15px; }
.soccer-ball {
  font-size: 50px; display: inline-block;
  animation: spin 4s linear infinite;
  filter: drop-shadow(0 0 6px white);
}
@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}
.notification {
  position: fixed; top: 20px; right: 20px;
  background: black; color: white; padding: 12px 20px;
  border-radius: 8px; box-shadow: 0 0 12px rgba(0,0,0,0.5);
  opacity: 0; transition: opacity 0.5s ease; z-index: 9999;
}
.notification.show { opacity: 1; }
#loadingScreen {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  color: white; font-size: 24px; z-index: 9998; display: none;
}
.flower {
  position: absolute; font-size: 24px;
  animation: fall 3s linear forwards;
}
@keyframes fall {
  0% { transform: translateY(0) rotate(0deg);}
  100% { transform: translateY(100vh) rotate(360deg);}
}
</style>
</head>
<body>

<div class="overlay"></div>

<div class="page" id="loginForm">
  <div class="logo"><span class="soccer-ball">âš½</span></div>
  <h2>Soccer Login</h2>
  <input id="loginEmail" type="email" placeholder="Email" required>
  <input id="loginPassword" type="password" placeholder="Password" required>
  <button onclick="login()">Login</button>
  <div class="toggle">
    <p><a onclick="forgotPassword()">Forgot Password?</a></p>
    <p>Don't have an account? <a onclick="showSignup()">Sign up</a></p>
  </div>
</div>

<div class="page" id="signupForm">
  <div class="logo"><span class="soccer-ball">âš½</span></div>
  <h2>Join Soccer Club</h2>
  <input id="signupEmail" type="email" placeholder="Email" required>
  <input id="signupPassword" type="password" placeholder="Password" required>
  <input id="signupUsername" type="text" placeholder="@Username" maxlength="8" required>
  <select id="signupFlag">
    <option value="ðŸ‡¦ðŸ‡·">ðŸ‡¦ðŸ‡· Argentina</option>
    <option value="ðŸ‡§ðŸ‡·">ðŸ‡§ðŸ‡· Brazil</option>
    <option value="ðŸ‡µðŸ‡¹">ðŸ‡µðŸ‡¹ Portugal</option>
    <option value="ðŸ‡®ðŸ‡¹">ðŸ‡®ðŸ‡¹ Italy</option>
  </select>
  <input id="signupTeam" type="text" placeholder="Team Name" maxlength="12" required>
  <button onclick="signup()">Sign Up</button>
  <div class="toggle">
    <p>Already have an account? <a onclick="showLogin()">Login</a></p>
  </div>
</div>

<div id="notification" class="notification"></div>
<div id="loadingScreen">Loading... Please wait</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-database-compat.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDFHskUWiyHhZke3KT9kkOtFI_gPsKfiGo",
  authDomain: "itzhoyoo-f9f7e.firebaseapp.com",
  databaseURL: "https://itzhoyoo-f9f7e-default-rtdb.firebaseio.com",
  projectId: "itzhoyoo-f9f7e",
  storageBucket: "itzhoyoo-f9f7e.appspot.com",
  messagingSenderId: "1094792075584",
  appId: "1:1094792075584:web:d49e9c3f899d3cd31082a5",
  measurementId: "G-LLT6F9WRKH"
};
firebase.initializeApp(firebaseConfig);
firebase.analytics();
const auth = firebase.auth();
const db = firebase.database();

function notify(message) {
  const note = document.getElementById('notification');
  note.textContent = message;
  note.classList.add('show');
  setTimeout(() => note.classList.remove('show'), 3000);
}

function showSignup() { switchPage('loginForm', 'signupForm'); }
function showLogin() { switchPage('signupForm', 'loginForm'); }

function switchPage(fromId, toId) {
  const from = document.getElementById(fromId);
  const to = document.getElementById(toId);
  from.classList.remove('active');
  setTimeout(() => {
    from.style.display='none';
    to.style.display='flex';
    requestAnimationFrame(()=>to.classList.add('active'));
  }, 300);
}

function signup() {
  const email = document.getElementById('signupEmail').value.trim();
  const password = document.getElementById('signupPassword').value.trim();
  const username = document.getElementById('signupUsername').value.trim();
  const team = document.getElementById('signupTeam').value.trim();
  const flag = document.getElementById('signupFlag').value;
  const fullTeamName = flag + ' ' + team;

  if (!email || !password || !username || !team) {
    notify("Please fill out all fields.");
    return;
  }

  const usersRef = db.ref('users');
  usersRef.once('value', snapshot => {
    let usernameTaken = false;
    let teamTaken = false;
    snapshot.forEach(userSnap => {
      const data = userSnap.val();
      if (data.username === username) usernameTaken = true;
      if (data.team === fullTeamName) teamTaken = true;
    });

    if (usernameTaken) { notify("Username is taken."); return; }
    if (teamTaken) { notify("Team name is taken."); return; }

    auth.createUserWithEmailAndPassword(email, password)
    .then(userCredential => {
      const userId = userCredential.user.uid;
      db.ref('users/' + userId).set({
        name: username,
        username: username,
        team: fullTeamName,
        stats: { wins:0, losses:0, draws:0, gamesPlayed:0, points:0 }
      });
      db.ref('teams/' + fullTeamName).set({
        username: username,
        stats: { wins:0, losses:0, draws:0, gamesPlayed:0, points:0 }
      });
      showFlowers();
      document.getElementById('loadingScreen').style.display='flex';
      setTimeout(()=> window.location.href='homepage/', 3000);
    })
    .catch(e=> {console.error(e); notify(e.message);});
  });
}

function login() {
  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value.trim();
  auth.signInWithEmailAndPassword(email, password)
  .then(()=> {
    notify("Login successful!");
    window.location.href='homepage/';
  }).catch(e=>{
    console.error(e);
    notify(e.message);
  });
}

function forgotPassword() {
  const email = document.getElementById('loginEmail').value.trim();
  if (!email) { notify("Enter your email."); return; }
  auth.sendPasswordResetEmail(email)
  .then(()=> notify("Password reset email sent."))
  .catch(e=> {console.error(e); notify(e.message);});
}

function showFlowers() {
  for (let i=0; i<30; i++) {
    const flower = document.createElement('div');
    flower.className='flower';
    flower.style.left = Math.random()*100 + 'vw';
    flower.style.top = '-30px';
    flower.textContent = 'ðŸŒ¸';
    document.body.appendChild(flower);
    setTimeout(()=> flower.remove(), 3000);
  }
}

// On load show login
document.addEventListener('DOMContentLoaded', ()=>{
  const login = document.getElementById('loginForm');
  login.style.display='flex';
  requestAnimationFrame(()=> login.classList.add('active'));
});
</script>

</body>
</html>