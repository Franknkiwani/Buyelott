<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3D Glassy Dark App with Blue Hero & CTAs</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      background: linear-gradient(145deg, #0e0e0e, #1a1a1a);
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    header {
      width: 100%;
      height: 40px;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      background: rgba(40, 40, 40, 0.4);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow:
        0 4px 8px rgba(0, 0, 0, 0.5),
        inset 0 0 0.5px rgba(255, 255, 255, 0.05),
        inset 0 -1px 0 rgba(255, 255, 255, 0.05);
      z-index: 999;
      transform: perspective(800px) translateZ(10px);
    }

    .logo {
      font-weight: 600;
      font-size: 0.95rem;
      letter-spacing: 0.5px;
      user-select: none;
    }

    .logo .dls {
      color: hotpink;
    }

    .logo .num {
      color: white;
    }

    .logo .mods {
      color: cyan;
    }

    .glass-btn {
      padding: 6px 14px;
      font-size: 0.8rem;
      color: white;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      backdrop-filter: blur(8px);
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .glass-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .hero {
      margin-top: 50px;
      width: 95%;
      padding: 60px 20px 40px; /* extra bottom padding for CTAs */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #0099ff, #005fbb);
      color: white;
      text-align: center;
      box-shadow:
        0 10px 20px rgba(0, 0, 0, 0.7),
        inset 0 0 40px rgba(0, 0, 0, 0.9);
      border-radius: 14px;
      margin-left: auto;
      margin-right: auto;
      user-select: none;
      max-width: none;
    }

    .hero h1 {
      font-size: 2.5rem;
      font-weight: 900;
      letter-spacing: 2px;
      text-shadow:
        0 0 8px rgba(0, 0, 0, 0.8),
        0 0 20px rgba(0, 0, 0, 0.6);
      margin-bottom: 12px;
      line-height: 1.1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .hero p {
      font-size: 1.2rem;
      font-weight: 500;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      opacity: 0.85;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin-bottom: 30px;
    }

    /* Custom Tinder-style fire icon */
    .fire-icon {
      display: inline-block;
      width: 20px;
      height: 28px;
      background: linear-gradient(45deg, #ff5f6d, #ffc371);
      clip-path: polygon(
        50% 0%,
        65% 25%,
        80% 40%,
        85% 55%,
        70% 70%,
        75% 85%,
        60% 100%,
        40% 85%,
        30% 70%,
        15% 50%,
        30% 30%
      );
      filter: drop-shadow(0 0 5px #ff5f6d);
      position: relative;
      animation: flicker 1.5s infinite ease-in-out;
    }

    /* subtle flicker animation to simulate fire */
    @keyframes flicker {
      0%, 100% {
        opacity: 1;
        filter: drop-shadow(0 0 7px #ff5f6d);
        transform: translateY(0);
      }
      50% {
        opacity: 0.8;
        filter: drop-shadow(0 0 12px #ff4a56);
        transform: translateY(-2px);
      }
    }

    .cta-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      width: 100%;
      max-width: 400px;
    }

   .cta-btn {
  flex: 1;
  padding: 12px 0;
  font-weight: 700;
  font-size: 1rem;
  border-radius: 10px;
  border: 2px solid black; /* <-- Black edge added here */
  cursor: pointer;
  user-select: none;
  transition: background-color 0.3s ease, border-color 0.3s ease;
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  background: rgba(255 255 255 / 0.1);
  color: white;
}

.cta-btn.download {
  background: rgba(0, 153, 255, 0.8);
  box-shadow:
    0 4px 12px rgba(0, 153, 255, 0.6);
  border-color: black; /* keep black edges */
}

.cta-btn.download:hover {
  background: rgba(0, 153, 255, 1);
  border-color: black;
}

.cta-btn.create {
  background: rgba(0, 255, 204, 0.8);
  box-shadow:
    0 4px 12px rgba(0, 255, 204, 0.6);
  color: black;
  font-weight: 800;
  border-color: black;
}

.cta-btn.create:hover {
  background: rgba(0, 255, 204, 1);
  border-color: black;
}
 .container {
    max-width: 600px;
    margin: 2rem auto;
    padding: 0 1rem;
  }
  .mod-card {
    background: rgba(255 255 255 / 0.05);
    border-radius: 12px;
    margin-bottom: 1rem;
    overflow: hidden;
    box-shadow: 0 4px 10px rgb(0 0 0 / 0.7);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease;
  }
  .mod-card:hover {
    transform: translateY(-5px);
  }
  .mod-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
  }
  .mod-info {
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .mod-title {
    font-weight: 700;
    font-size: 1.1rem;
    flex: 1;
  }
  button.download-btn {
    background: #007aff;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    width: 120px;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  button.download-btn:active {
    background-color: #005bb5;
  }
  #loadMore {
    display: block;
    margin: 2rem auto;
    background: #00cc88;
    border: none;
    padding: 0.75rem 2rem;
    border-radius: 8px;
    color: #121212;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    font-size: 1.1rem;
    transition: background 0.3s ease;
  }
  #loadMore:disabled {
    background: #666;
    cursor: not-allowed;
  }
 /* Fullscreen overlay with background blur */
.countdown-overlay {
  position: fixed;
  inset: 0; /* top/right/bottom/left 0 */
  background: rgba(0, 0, 0, 0.35);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 9999;
}

/* Show overlay when visible */
.countdown-overlay.visible {
  visibility: visible;
  opacity: 1;
}

/* The glassy popup box */
.countdown-popup {
  background: rgba(255, 255, 255, 0.15);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  padding: 2rem 3rem;
  color: white;
  font-size: 2.2rem;
  font-weight: 600;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  box-shadow: 0 8px 32px rgba(0,0,0,0.25);
  text-align: center;
  min-width: 320px;
  max-width: 400px;
  user-select: none;
}
  .container {
    text-align: center;
  }

  svg {
    width: 200px;
    height: 150px;
    display: block;
    margin: 0 auto 25px;
  }

  .loading-text {
    font-size: 1.5rem;
    letter-spacing: 3px;
    opacity: 0.85;
    animation: fadeInOut 3s ease-in-out infinite;
  }

  @keyframes fadeInOut {
    0%, 100% { opacity: 0.85; }
    50% { opacity: 0.4; }
  }

  .ball {
    animation: bounce 2s ease-in-out infinite;
    transform-origin: center;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  .loading-bar-container {
    width: 250px;
    height: 12px;
    background: #222;
    border-radius: 6px;
    overflow: hidden;
    margin: 0 auto;
    display: none;
  }

  .loading-bar {
    height: 100%;
    width: 0%;
    background: #fff;
    border-radius: 6px;
    transition: width 3s linear;
  }
  </style>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-database-compat.js"></script>
</head>
<body>
  <header>
    <div class="logo">
      <span class="dls">DLS</span>
      <span class="num"> 25 </span>
      <span class="mods">MODS</span>
    </div>
    <button class="glass-btn">CREATE MODS</button>
  </header>

  <section class="hero">
    <h1>
      <span class="fire-icon"></span>
      DLS25 MODS
      <span class="fire-icon"></span>
    </h1>
    <p>
      The best mods for Dream League Soccer are here.
      <span class="fire-icon"></span>
    </p>
    <div class="cta-container">
      <button class="cta-btn download">DOWNLOAD NOW</button>
      <button class="cta-btn create">CREATE NOW</button>
    </div>
  </section>

  <div class="container">
    <!-- Your 3D magic or main app content here -->
  </div>
 <div class="container" id="modContainer">
  <h1>MODS</h1>
    <!-- Big Box Ad (300x250) -->
<div style="width: 300px; height: 250px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key' : '037f6e178c935a44f2ef5ab0ce53116a',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/037f6e178c935a44f2ef5ab0ce53116a/invoke.js"></script>
</div>
</div>
  <!-- Big Box Ad (300x250) -->
<div style="width: 300px; height: 250px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key' : '037f6e178c935a44f2ef5ab0ce53116a',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/037f6e178c935a44f2ef5ab0ce53116a/invoke.js"></script>
</div>
<style>
  #modContainer {
    text-align: center;
  }
</style>
  <div id="mods"></div>
  <button id="loadMore">Load More Mods</button>
    <!-- Big Box Ad (300x250) -->
<div style="width: 300px; height: 250px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key' : '037f6e178c935a44f2ef5ab0ce53116a',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/037f6e178c935a44f2ef5ab0ce53116a/invoke.js"></script>
</div>
<div style="width:320px; height:50px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key': 'f17f4bf893957f37c1f0b072d1f31673',
      'format': 'iframe',
      'height': 50,
      'width': 320,
      'params': {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/f17f4bf893957f37c1f0b072d1f31673/invoke.js"></script>
</div>
</div>

<div id="countdownOverlay" class="countdown-overlay">
  <div class="countdown-popup">
    <!-- Big Box Ad (300x250) -->
<div style="width: 300px; height: 250px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key' : '037f6e178c935a44f2ef5ab0ce53116a',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/037f6e178c935a44f2ef5ab0ce53116a/invoke.js"></script>
</div>
    <p>Download starting in <span id="countdownTimer">5</span> seconds...</p>
  <!-- Big Box Ad (300x250) -->
<div style="width: 300px; height: 250px; margin: 15px auto;">
  <script type="text/javascript">
    atOptions = {
      'key' : '037f6e178c935a44f2ef5ab0ce53116a',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/037f6e178c935a44f2ef5ab0ce53116a/invoke.js"></script>
</div>
</div>
  <div class="container">
    <div id="loading-screen">
      <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
        <g stroke="#fff" stroke-width="2" fill="none" stroke-linejoin="round" stroke-linecap="round" >
          <circle cx="50" cy="50" r="8"/>
          <line x1="50" y1="58" x2="50" y2="90"/>
          <line x1="50" y1="65" x2="40" y2="75"/>
          <line x1="50" y1="65" x2="60" y2="75"/>
          <line x1="50" y1="90" x2="40" y2="110"/>
          <line x1="50" y1="90" x2="60" y2="110"/>
        </g>

        <g stroke="#fff" stroke-width="2" fill="none" stroke-linejoin="round" stroke-linecap="round" transform="translate(110,0)">
          <circle cx="50" cy="50" r="8"/>
          <line x1="50" y1="58" x2="50" y2="90"/>
          <line x1="50" y1="65" x2="40" y2="75"/>
          <line x1="50" y1="65" x2="60" y2="75"/>
          <line x1="50" y1="90" x2="40" y2="110"/>
          <line x1="50" y1="90" x2="60" y2="110"/>
        </g>

        <circle class="ball" cx="105" cy="95" r="10" stroke="#fff" stroke-width="2" fill="none"/>
        <path class="ball" stroke="#fff" stroke-width="1" fill="none" d="
          M95 95 l5 -3 l5 3 l-5 3 l-5 -3
          M100 90 l0 10
          M110 90 l0 10
          M102 87 l6 3
          M98 87 l-6 3
        "/>
      </svg>
      <div class="loading-text">Loading...</div>

      <div class="loading-bar-container" id="loading-bar-container">
        <div class="loading-bar" id="loading-bar"></div>
      </div>
    </div>
  </div>

<script>
  // Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDFHskUWiyHhZke3KT9kkOtFI_gPsKfiGo",
    authDomain: "itzhoyoo-f9f7e.firebaseapp.com",
    databaseURL: "https://itzhoyoo-f9f7e-default-rtdb.firebaseio.com",
    projectId: "itzhoyoo-f9f7e",
    storageBucket: "itzhoyoo-f9f7e.filestorage.app",
    messagingSenderId: "1094792075584",
    appId: "1:1094792075584:web:d49e9c3f899d3cd31082a5"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Constants
  const BATCH_SIZE = 6;
  const LOCAL_STORAGE_KEY = "loadedMods";

  // DOM elements
  const modsEl = document.getElementById("mods");
  const loadMoreBtn = document.getElementById("loadMore");

  // State
  let allMods = [];
  let displayedMods = [];
  let currentIndex = 0;

  // Shuffle function
  function shuffleArray(arr) {
    for(let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]]; // fixed swap
    }
  }

  // Load from localStorage or Firebase
  async function loadMods() {
    const saved = localStorage.getItem(LOCAL_STORAGE_KEY);
    if (saved) {
      try {
        allMods = JSON.parse(saved);
        console.log("Loaded mods from localStorage:", allMods.length);
      } catch {
        allMods = [];
      }
    }

    if (!allMods.length) {
      console.log("Fetching mods from Firebase...");
      const snapshot = await db.ref("/mods").once("value");
      if (!snapshot.exists()) {
        modsEl.innerHTML = "<p>No mods found.</p>";
        loadMoreBtn.disabled = true;
        return;
      }
      allMods = Object.entries(snapshot.val()).map(([key, val]) => ({
        id: key,
        ...val
      }));
      shuffleArray(allMods);
      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(allMods));
    }

    displayNextBatch();
  }

  // Display next batch of mods
function displayNextBatch() {
  if (currentIndex >= allMods.length) {
    loadMoreBtn.disabled = true;
    loadMoreBtn.textContent = "No more mods";
    return;
  }

  const nextBatch = allMods.slice(currentIndex, currentIndex + BATCH_SIZE);
  nextBatch.forEach((mod, index) => {
    displayedMods.push(mod);
    const card = createModCard(mod);
    modsEl.appendChild(card);

    const globalIndex = currentIndex + index + 1; // +1 because index is zero-based
    if (globalIndex % 3 === 0) {
      // Create ad container div with fixed size
      const adContainer = document.createElement("div");
      adContainer.style.width = "320px";
      adContainer.style.height = "50px";
      adContainer.style.margin = "15px auto";
      // Assign a unique id for ad slot
      const adSlotId = `ad-slot-${globalIndex}`;
      adContainer.id = adSlotId;
      modsEl.appendChild(adContainer);

      // Define atOptions on window for this ad slot
      window.atOptions = {
        key: 'f17f4bf893957f37c1f0b072d1f31673',
        format: 'iframe',
        height: 50,
        width: 320,
        params: {},
        containerId: adSlotId
      };

      // Create script element asynchronously
      const adScript = document.createElement("script");
      adScript.src = "//www.highperformanceformat.com/f17f4bf893957f37c1f0b072d1f31673/invoke.js";
      adScript.async = true;
      document.body.appendChild(adScript);
    }
  });

  currentIndex += BATCH_SIZE;

  if (currentIndex >= allMods.length) {
    loadMoreBtn.disabled = true;
    loadMoreBtn.textContent = "No more mods";
  }
}

  // Create a mod card element
  function createModCard(mod) {
    const card = document.createElement("div");
    card.className = "mod-card";

    const img = document.createElement("img");
    img.className = "mod-image";
    img.src = mod.imageurl || "";
    img.alt = mod.title || "Mod image";
    card.appendChild(img);

    const info = document.createElement("div");
    info.className = "mod-info";

    const title = document.createElement("div");
    title.className = "mod-title";
    title.textContent = mod.title || "Untitled Mod";
    info.appendChild(title);

    const btn = document.createElement("button");
    btn.className = "download-btn";
    btn.textContent = `Download Now (${mod.downloads || 0})`;
    btn.onclick = async () => {
      // Increment downloads locally and in Firebase
      mod.downloads = (mod.downloads || 0) + 1;
      btn.textContent = `Download Now (${mod.downloads})`;
      try {
        await db.ref(`/mods/${mod.id}/downloads`).set(mod.downloads);
        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(allMods));
      } catch (e) {
        console.error("Failed to update downloads count:", e);
      }

      // Show countdown popup
      const overlay = document.getElementById("countdownOverlay");
      const timerEl = document.getElementById("countdownTimer");
      let countdown = 5;

      timerEl.textContent = countdown;
      overlay.classList.add("visible");

      const interval = setInterval(() => {
        countdown--;
        timerEl.textContent = countdown;
        if (countdown <= 0) {
          clearInterval(interval);
          overlay.classList.remove("visible");
          // Redirect after countdown
          window.location.href = "downloadnow.html";
        }
      }, 1000);
    };

    info.appendChild(btn);
    card.appendChild(info);

    return card;
  }

  // Load initial mods
  loadMods();

  // Load more on button click
  loadMoreBtn.onclick = () => {
    displayNextBatch();
  };
</script>
<script>
  // Wait 3.5s then swap to bar, start animation
  setTimeout(() => {
    const loadingScreen = document.getElementById('loading-screen');
    const loadingBarContainer = document.getElementById('loading-bar-container');
    const loadingBar = document.getElementById('loading-bar');

    // Show bar container inside loading screen
    loadingBarContainer.style.display = 'block';

    // Animate bar fill
    setTimeout(() => {
      loadingBar.style.width = '100%';

      // When animation ends (3s), remove loading screen & close page
      setTimeout(() => {
        loadingScreen.remove();
        // Attempt to close the window/tab
        window.close();
      }, 3000);

    }, 50);
  }, 3500);
</script>
</body>
</html>