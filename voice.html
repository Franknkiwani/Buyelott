<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Language Detector</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #111;
      color: #fff;
      padding: 2rem;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    input, button {
      display: block;
      margin-top: 1rem;
      font-size: 1rem;
    }
    button {
      background: #0a84ff;
      border: none;
      padding: 0.7rem 1.5rem;
      border-radius: 12px;
      color: white;
      cursor: pointer;
    }
    video {
      max-width: 100%;
      margin-top: 1rem;
      border-radius: 12px;
    }
    #result {
      margin-top: 2rem;
      background: #1c1c1e;
      padding: 1rem;
      border-radius: 10px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>üéôÔ∏è Upload a Video to Detect Spoken Language</h1>
  <input type="file" id="videoInput" accept="video/*">
  <video id="videoPreview" controls style="display:none;"></video>
  <button onclick="uploadVideo()">Upload & Detect</button>

  <div id="result" style="display:none;"></div>

  <script>
    const input = document.getElementById("videoInput");
    const preview = document.getElementById("videoPreview");
    const resultBox = document.getElementById("result");

    input.addEventListener("change", () => {
      const file = input.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        preview.src = url;
        preview.style.display = "block";
      }
    });

    async function uploadVideo() {
      const file = input.files[0];
      if (!file) return alert("Choose a video first!");

      const formData = new FormData();
      formData.append("video", file);

      resultBox.style.display = "none";
      resultBox.textContent = "";

      try {
        const res = await fetch("/upload-video", {
          method: "POST",
          body: formData
        });

        const data = await res.json();

        if (!res.ok) {
          throw new Error(data.error || "Upload failed");
        }

        resultBox.style.display = "block";
        resultBox.textContent = `üß† Detected Transcript:\n\n${data.transcript || JSON.stringify(data)}`;
      } catch (err) {
        resultBox.style.display = "block";
        resultBox.textContent = `‚ùå Error: ${err.message}`;
      }
    }
  </script>
</body>
</html>